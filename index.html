<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Cartinha Mágica - Você Consegue</title>
<style>
:root{
  --bg: #fff6fb;
  --pink-1: #ffb6d5;
  --pink-2: #ff7fbf;
  --paper: #fff;
  --shadow: rgba(0,0,0,0.12);
}

html,body{
  height:100%;
  margin:0;
  font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: linear-gradient(180deg, var(--bg) 0%, #fff 100%);
  display:flex;
  align-items:center;
  justify-content:center;
}

.scene{
  width:340px;
  height:260px;
  display:flex;
  align-items:center;
  justify-content:center;
  perspective:1000px;
}

/* Envelope (base) */
.envelope {
  width:260px;
  height:170px;
  position:relative;
  cursor:pointer;
  transform-style:preserve-3d;
  transition:transform 400ms ease;
}

/* Back of envelope */
.env-back {
  position:absolute;
  inset:0;
  background: linear-gradient(180deg,#fff 0%, #fff0 100%);
  border-radius:10px;
  box-shadow: 0 10px 20px var(--shadow);
  border: 1px solid rgba(0,0,0,0.05);
  overflow:hidden;
}

/* Flap */
.env-flap {
  position:absolute;
  left:0;
  right:0;
  top:-1px;
  height:94px;
  background: linear-gradient(180deg, var(--pink-1), var(--pink-2));
  transform-origin: 50% 100%;
  border-radius:10px 10px 0 0;
  box-shadow: 0 6px 18px rgba(0,0,0,0.12);
  display:flex;
  align-items:flex-end;
  justify-content:center;
  transition: transform 500ms cubic-bezier(.2,.9,.2,1), box-shadow 300ms ease;
  z-index:6;
}

.env-flap::after{
  content:'';
  width:140px;
  height:60px;
  background: linear-gradient(180deg, rgba(255,255,255,0.4), rgba(255,255,255,0.05));
  border-radius: 0 0 70px 70px;
  transform:translateY(18px);
  display:block;
  opacity:0.9;
}

/* Paper inside */
.paper {
  position:absolute;
  left:50%;
  transform:translateX(-50%) translateY(18%);
  top:10px;
  width:86%;
  height:76%;
  background: linear-gradient(180deg, var(--paper), #fff);
  border-radius:8px;
  box-shadow: 0 8px 18px rgba(0,0,0,0.08);
  z-index:4;
  transition: transform 700ms cubic-bezier(.16,1,.3,1), opacity 300ms ease;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:18px;
  opacity:0;
}

.paper .mensagem {
  text-align:center;
  font-weight:600;
  font-size:28px;
  line-height:1.05;
  color:#ff2fa3;
  background: linear-gradient(90deg, #ff2fa3 0%, #ff87c6 50%, #ffffff 100%);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  white-space: pre-wrap;
}

/* Animations */
.envelope.open .env-flap {
  transform: rotateX(180deg);
  box-shadow: 0 18px 28px rgba(0,0,0,0.18);
}
.envelope.open .paper {
  transform:translateX(-50%) translateY(-18%);
  opacity:1;
}

.sparkle {
  position:absolute;
  width:10px;
  height:10px;
  border-radius:50%;
  top:12px;
  right:18px;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.95), rgba(255,255,255,0.4));
  filter: blur(4px);
  opacity:0.8;
  z-index:8;
  transform: scale(0.9);
}

.controls{
  margin-top:14px;
  display:flex;
  gap:10px;
  justify-content:center;
  width:100%;
}
button {
  border:0;
  padding:10px 14px;
  border-radius:8px;
  font-weight:600;
  cursor:pointer;
  box-shadow: 0 6px 12px rgba(0,0,0,0.06);
}
.btn-open{
  background: linear-gradient(90deg, #ff7fbf, #ffb6d5);
  color:white;
}
.btn-reset{
  background: white;
  color:#ff2fa3;
  border:1px solid rgba(255,47,163,0.12);
}

@media (max-width:420px){
  .scene{ transform: scale(0.92); }
}
</style>
</head>
<body>
<main style="text-align:center;">
  <div class="scene" aria-hidden="false">
    <div id="envelope" class="envelope" role="button" aria-pressed="false" aria-label="Abrir cartinha">
      <div class="env-back"></div>

      <div class="paper" id="paper" aria-hidden="true">
        <div class="mensagem" id="mensagem"></div>
      </div>

      <div class="env-flap"></div>
      <div class="sparkle" aria-hidden="true"></div>
    </div>
  </div>

  <div class="controls" aria-hidden="false">
    <button id="btn-open" class="btn-open">Abrir Cartinha</button>
    <button id="btn-reset" class="btn-reset">Fechar / Resetar</button>
  </div>

  <!-- Som -->
  <audio id="som-papel" src="https://assets.codepen.io/3/paper-flip.mp3" preload="auto"></audio>
</main>

<script>
(function(){
  const envelope = document.getElementById('envelope');
  const btnOpen = document.getElementById('btn-open');
  const btnReset = document.getElementById('btn-reset');
  const paper = document.getElementById('paper');
  const mensagem = document.getElementById('mensagem');
  const somPapel = document.getElementById('som-papel');

  const texto = "bote o pau na mesa e mande medir";

  function escreverTexto(texto){
    mensagem.textContent = "";
    let i = 0;
    const interval = setInterval(()=>{
      mensagem.textContent += texto[i];
      i++;
      if(i >= texto.length) clearInterval(interval);
    }, 120);
  }

  function setOpen(open){
    if(open){
      envelope.classList.add('open');
      envelope.setAttribute('aria-pressed','true');
      paper.setAttribute('aria-hidden','false');
      btnOpen.textContent = 'Cartinha Aberta';
      somPapel.currentTime=0;
      somPapel.play();
      escreverTexto(texto);
    } else {
      envelope.classList.remove('open');
      envelope.setAttribute('aria-pressed','false');
      paper.setAttribute('aria-hidden','true');
      btnOpen.textContent = 'Abrir Cartinha';
      mensagem.textContent = "";
    }
  }

  envelope.addEventListener('click', () => {
    const isOpen = envelope.classList.contains('open');
    setOpen(!isOpen);
  });

  btnOpen.addEventListener('click', () => setOpen(true));
  btnReset.addEventListener('click', () => setOpen(false));

  envelope.addEventListener('keydown', (e) => {
    if(e.key === 'Enter' || e.key === ' '){
      e.preventDefault();
      setOpen(!envelope.classList.contains('open'));
    }
  });

  setOpen(false);
})();
</script>
</body>
</html>
